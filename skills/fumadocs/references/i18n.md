# Internationalization (i18n)

## Configuration

Create an i18n config file:

```ts
// lib/i18n.ts
import type { I18nConfig } from 'fumadocs-core/i18n';

export const i18n: I18nConfig = {
  defaultLanguage: 'en',
  languages: ['en', 'zh', 'ja', 'fr'],
};
```

## Middleware

Set up locale detection middleware:

```ts
// middleware.ts
import { createI18nMiddleware } from 'fumadocs-core/i18n';
import { i18n } from '@/lib/i18n';

export default createI18nMiddleware(i18n);

export const config = {
  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],
};
```

## App Directory Structure

Add a `[lang]` dynamic segment:

```
app/
├── [lang]/
│   ├── layout.tsx
│   ├── docs/
│   │   ├── layout.tsx
│   │   └── [[...slug]]/
│   │       └── page.tsx
│   └── page.tsx
content/
├── docs/
│   ├── index.mdx           # Default language (en)
│   ├── index.zh.mdx         # Chinese
│   ├── index.ja.mdx         # Japanese
│   ├── getting-started.mdx
│   └── getting-started.zh.mdx
```

Localized content uses the pattern `{name}.{locale}.mdx`. Files without a locale suffix use the default language.

## Source Loader with i18n

```ts
// lib/source.ts
import { docs, meta } from '@/.source';
import { createMDXSource } from 'fumadocs-mdx/runtime/next';
import { loader } from 'fumadocs-core/source';
import { i18n } from '@/lib/i18n';

export const source = loader({
  baseUrl: '/docs',
  source: createMDXSource(docs, meta),
  i18n,
});
```

## Layout with Language Parameter

```tsx
// app/[lang]/docs/layout.tsx
import { DocsLayout } from 'fumadocs-ui/layouts/docs';
import { source } from '@/lib/source';
import type { ReactNode } from 'react';

export default async function Layout({
  children,
  params,
}: {
  children: ReactNode;
  params: Promise<{ lang: string }>;
}) {
  const { lang } = await params;

  return (
    <DocsLayout
      tree={source.getPageTree(lang)}
      nav={{ title: 'My Docs' }}
      i18n // enables language switcher
    >
      {children}
    </DocsLayout>
  );
}
```

## Page with Language Parameter

```tsx
// app/[lang]/docs/[[...slug]]/page.tsx
import { DocsPage, DocsBody, DocsTitle } from 'fumadocs-ui/layouts/docs/page';
import { source } from '@/lib/source';
import { notFound } from 'next/navigation';

export default async function Page(props: {
  params: Promise<{ lang: string; slug?: string[] }>;
}) {
  const { lang, slug } = await props.params;
  const page = source.getPage(slug, lang);
  if (!page) notFound();

  const { body: MDXContent, toc } = await page.data.load();

  return (
    <DocsPage toc={toc}>
      <DocsTitle>{page.data.title}</DocsTitle>
      <DocsBody>
        <MDXContent />
      </DocsBody>
    </DocsPage>
  );
}

export function generateStaticParams() {
  return source.generateParams();
}
```

## Search with i18n

See [search.md](./search.md) for configuring `localeMap` in the search API route to support per-locale search indexing.

## Root Layout with Lang

```tsx
// app/[lang]/layout.tsx
import { RootProvider } from 'fumadocs-ui/provider';
import type { ReactNode } from 'react';

export default async function RootLayout({
  children,
  params,
}: {
  children: ReactNode;
  params: Promise<{ lang: string }>;
}) {
  const { lang } = await params;

  return (
    <html lang={lang} suppressHydrationWarning>
      <body>
        <RootProvider locale={lang}>{children}</RootProvider>
      </body>
    </html>
  );
}
```
