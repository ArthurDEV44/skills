# Ed25519-dalek API Reference

## Table of Contents

- [Overview](#overview)
- [Structs](#structs)
- [Traits](#traits)
- [Constants](#constants)
- [Feature Flags](#feature-flags)
- [Serialization](#serialization)
- [Usage Patterns](#usage-patterns)
- [Dependencies](#dependencies)

## Overview

Pure Rust implementation of Ed25519 digital signatures (RFC 8032) using the dalek cryptography library. Provides key generation, signing, verification, and batch verification.

## Structs

### SigningKey

Ed25519 signing (private) key. 32 bytes.

```rust
use ed25519_dalek::SigningKey;
use rand::rngs::OsRng;

let signing_key = SigningKey::generate(&mut OsRng);
```

Methods:
- `generate(csprng)` -- generate random keypair
- `from_bytes(bytes)` -- from 32-byte array
- `from_keypair_bytes(bytes)` -- from 64-byte keypair (signing + verifying)
- `to_bytes()` -- serialize to 32 bytes
- `to_keypair_bytes()` -- serialize to 64 bytes (signing + verifying)
- `verifying_key()` -- extract public key
- `sign(message)` -- produce signature (via `Signer` trait)
- `verify(message, signature)` -- verify (via `Verifier` trait)

### VerifyingKey

Ed25519 verifying (public) key. 32 bytes.

```rust
let verifying_key = signing_key.verifying_key();
```

Methods:
- `from_bytes(bytes)` -- from 32-byte array (returns `Result`)
- `to_bytes()` -- serialize to 32 bytes
- `verify(message, signature)` -- verify signature (via `Verifier` trait)
- `verify_strict(message, signature)` -- stricter verification (rejects non-canonical signatures)

### Signature

Ed25519 signature. 64 bytes.

Methods:
- `to_bytes()` -- serialize to 64 bytes
- `from_bytes(bytes)` -- from 64-byte array
- `try_from(slice)` -- from byte slice (returns `Result`)

## Traits

### Signer

```rust
use ed25519_dalek::Signer;
let signature = signing_key.sign(message);
```

### Verifier

```rust
use ed25519_dalek::Verifier;
verifying_key.verify(message, &signature)?;
// Returns Ok(()) or Err(SignatureError)
```

### DigestSigner / DigestVerifier (feature: `digest`)

Pre-hash Ed25519ph for large messages:

```rust
use ed25519_dalek::{DigestSigner, Sha512};

let prehashed = Sha512::new().chain_update(large_message);
let signature = signing_key.sign_digest(prehashed);
```

## Constants

| Constant | Value | Description |
|----------|-------|-------------|
| `PUBLIC_KEY_LENGTH` | 32 | Verifying key size in bytes |
| `SECRET_KEY_LENGTH` | 32 | Signing key size in bytes |
| `KEYPAIR_LENGTH` | 64 | Combined key size in bytes |
| `SIGNATURE_LENGTH` | 64 | Signature size in bytes |

## Feature Flags

| Feature | Description |
|---------|-------------|
| `std` | Standard library support (default) |
| `rand_core` | CSPRNG key generation support |
| `serde` | Serialization/deserialization |
| `pkcs8` | PKCS#8 key encoding |
| `pem` | PEM format key encoding |
| `batch` | Batch signature verification (`verify_batch`) |
| `digest` | Ed25519ph prehashed signatures |
| `zeroize` | Zero memory on drop |
| `hazmat` | Low-level operations (expert use only) |

## Serialization

### Bytes

```rust
// Serialize
let sk_bytes: [u8; 32] = signing_key.to_bytes();
let vk_bytes: [u8; 32] = verifying_key.to_bytes();
let sig_bytes: [u8; 64] = signature.to_bytes();

// Deserialize
let sk = SigningKey::from_bytes(&sk_bytes);
let vk = VerifyingKey::from_bytes(&vk_bytes)?;
let sig = Signature::try_from(&sig_bytes[..])?;
```

### PKCS#8 PEM (feature: `pkcs8`, `pem`)

```rust
use ed25519_dalek::{VerifyingKey, pkcs8::DecodePublicKey};

let pem = "-----BEGIN PUBLIC KEY-----\nMCowBQYDK2Vw...";
let vk = VerifyingKey::from_public_key_pem(pem)?;
```

### Serde (feature: `serde`)

```rust
let encoded = bincode::serialize(&verifying_key)?;
let decoded: VerifyingKey = bincode::deserialize(&encoded)?;
```

## Usage Patterns

### Sign and verify

```rust
use ed25519_dalek::{SigningKey, Signer, Verifier};
use rand::rngs::OsRng;

let signing_key = SigningKey::generate(&mut OsRng);
let verifying_key = signing_key.verifying_key();

let message = b"transfer 100 tokens";
let signature = signing_key.sign(message);

assert!(verifying_key.verify(message, &signature).is_ok());
```

### Batch verification (feature: `batch`)

```rust
use ed25519_dalek::verify_batch;

let result = verify_batch(&messages, &signatures, &verifying_keys);
assert!(result.is_ok());
```

### Store and load keypair

```rust
// Save
let keypair_bytes = signing_key.to_keypair_bytes();
// Store keypair_bytes securely...

// Load
let signing_key = SigningKey::from_keypair_bytes(&keypair_bytes)?;
```

## Dependencies

```toml
[dependencies]
ed25519-dalek = { version = "2", features = ["rand_core"] }
rand = "0.8"
```

- License: BSD-3-Clause
